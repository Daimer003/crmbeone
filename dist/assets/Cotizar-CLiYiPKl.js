import{c as d,g as h,o as u,a as e,r as D,e as i,h as H,f as q,w as G,b as n,t as r,i as p,v as E,j as y,F,d as z,k as O,l as S,m as Q,n as B}from"./index-leR-G3hy.js";import{_ as s}from"./InputLabel-B9iJTAze.js";import{g as K}from"./products.service-DbzWizSY.js";import{g as W}from"./customer.service-ZhIoXb7V.js";const X={key:0,class:"fixed inset-0 z-50 flex items-center justify-center backdrop-opacity-[.75] backdrop-blur-2xl"},Y={class:"bg-white rounded-xl shadow-lg w-full max-w-md p-6 relative"},Z={__name:"ModalReutilizable",props:{show:Boolean},emits:["close"],setup(M){return(m,c)=>M.show?(u(),d("div",X,[e("div",Y,[e("button",{onClick:c[0]||(c[0]=w=>m.$emit("close")),class:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-xl"},"×"),D(m.$slots,"default")])])):h("",!0)}},_={class:"w-full"},ee={class:"bg-white shadow-md rounded-xl p-6 mx-auto space-y-8 mb-10"},oe={class:"text-2xl font-bold text-blue-700"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"border-t pt-6 space-y-4"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4 relative"},se={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded mt-1 max-h-60 overflow-auto"},re=["onMousedown"],ie={class:"text-gray-400 text-[12px]"},de={class:"relative"},ue={key:0,class:"absolute z-10 w-full bg-white border border-gray-300 rounded mt-1 max-h-60 overflow-auto"},ce=["onMousedown"],pe={class:"flex gap-4 w-full align-center justify-center"},me={class:"w-full"},be={class:"w-full"},ge={class:"flex flex-col w-full justify-center mt-4"},ve={class:"text-black text-md"},xe={class:"text-black text-2xl"},fe={class:"bg-white rounded-2xl shadow-lg p-6"},ye={class:"overflow-x-auto"},we={class:"min-w-full table-auto border-separate border-spacing-y-3"},Ce={class:"px-4 py-3 text-gray-800 font-medium"},Ve={class:"px-4 py-3 text-gray-700"},ke={class:"px-4 py-3 text-gray-600"},Ue={class:"px-4 py-3"},Ee={class:"px-4 py-3"},Le={__name:"Cotizar",setup(M){const m=i([]),c=i([]),w=i([]),g=i([]),v=i(""),b=i(""),C=i(0),x=i(!1),f=i(!1),t=H({numero:115,fechaCotizacion:"2025-04-14",agenteComercial:"",cliente:"",empresa:"",contacto:"",correo:"",celular:"",fechaInicioEvento:"",fechaFinEvento:"",ubicacion:"",linkMaps:"",horarioInicio:"",horarioFin:"",asistentes:"",vigencia:"15 días",unidadEjecucion:"Nivel Nacional",tipoSuelo:"",cantidadJornada:0,cantidadProducto:0}),V=i(!1);function $(){V.value=!0}function L(){V.value=!1}q(async()=>{try{const a=await K();m.value=a.data,c.value=a.data;const o=[...new Set(m.value.map(l=>l.categoria).filter(Boolean))];w.value=o,g.value=o}catch(a){console.error("Error al cargar productos:",a)}try{const a=await W();console.log("Clientes cargados:",a.data)}catch(a){console.error("Error al cargar clientes:",a)}});const k=()=>{const a=v.value.toLowerCase().trim(),o=b.value.toLowerCase().trim();c.value=m.value.filter(l=>{var j,P;const U=(j=l.nombre)==null?void 0:j.toLowerCase().includes(a),R=(P=l.categoria)==null?void 0:P.toLowerCase().includes(o);return U&&R})},N=()=>{const a=b.value.toLowerCase().trim();g.value=w.value.filter(o=>o.toLowerCase().includes(a))},I=a=>{v.value=a.nombre,C.value=a.total,x.value=!1},A=a=>{b.value=a,f.value=!1,k()},T=()=>{setTimeout(()=>{x.value=!1,f.value=!1},200)};G(b,k,N);const J=[{id:1,tarea:"Enviar cotización 115",responsable:"Laura",vencimiento:"2025-05-30",estado:"Pendiente",urgencia:"Alta"},{id:2,tarea:"Confirmar lugar del evento",responsable:"Carlos",vencimiento:"2025-05-29",estado:"En curso",urgencia:"Alta"}];return(a,o)=>(u(),d("div",_,[e("div",ee,[e("div",null,[e("h2",oe,"Cotización No. "+r(t.numero),1)]),e("div",le,[n(s,{label:"Fecha de Cotización",modelValue:t.fechaCotizacion,"onUpdate:modelValue":o[0]||(o[0]=l=>t.fechaCotizacion=l),type:"date"},null,8,["modelValue"]),n(s,{label:"Agente Comercial",modelValue:t.agenteComercial,"onUpdate:modelValue":o[1]||(o[1]=l=>t.agenteComercial=l)},null,8,["modelValue"]),e("div",null,[o[24]||(o[24]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Cliente",-1)),p(e("select",{"onUpdate:modelValue":o[2]||(o[2]=l=>t.cliente=l),class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},o[23]||(o[23]=[e("option",null,"Cliente directo",-1),e("option",null,"Compensar",-1),e("option",null,"Colsubsidio",-1),e("option",null,"Cafam",-1),e("option",null,"Comfama",-1),e("option",null,"Comfenalco",-1),e("option",null,"Comfachocó",-1)]),512),[[E,t.cliente]])]),e("div",null,[o[26]||(o[26]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Cliente final",-1)),p(e("select",{"onUpdate:modelValue":o[3]||(o[3]=l=>t.empresa=l),class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},o[25]||(o[25]=[e("option",null,"Cliente directo",-1),e("option",null,"Compensar",-1),e("option",null,"Colsubsidio",-1),e("option",null,"Cafam",-1),e("option",null,"Comfama",-1),e("option",null,"Comfenalco",-1),e("option",null,"Comfachocó",-1)]),512),[[E,t.empresa]])]),n(s,{label:"Contacto",modelValue:t.contacto,"onUpdate:modelValue":o[4]||(o[4]=l=>t.contacto=l)},null,8,["modelValue"]),n(s,{label:"Correo",modelValue:t.correo,"onUpdate:modelValue":o[5]||(o[5]=l=>t.correo=l),type:"email"},null,8,["modelValue"]),n(s,{label:"Celular",modelValue:t.celular,"onUpdate:modelValue":o[6]||(o[6]=l=>t.celular=l)},null,8,["modelValue"])]),e("div",te,[o[29]||(o[29]=e("h3",{class:"text-xl font-semibold text-gray-800"},"Detalles del Evento",-1)),e("div",ae,[n(s,{label:"Fecha Inicio Evento",modelValue:t.fechaInicioEvento,"onUpdate:modelValue":o[7]||(o[7]=l=>t.fechaInicioEvento=l),type:"date"},null,8,["modelValue"]),n(s,{label:"Fecha Fin Evento",modelValue:t.fechaFinEvento,"onUpdate:modelValue":o[8]||(o[8]=l=>t.fechaFinEvento=l),type:"date"},null,8,["modelValue"]),n(s,{label:"Ubicación del Evento",modelValue:t.ubicacion,"onUpdate:modelValue":o[9]||(o[9]=l=>t.ubicacion=l)},null,8,["modelValue"]),n(s,{label:"Link en Maps",modelValue:t.linkMaps,"onUpdate:modelValue":o[10]||(o[10]=l=>t.linkMaps=l)},null,8,["modelValue"]),n(s,{label:"Horario de Inicio",modelValue:t.horarioInicio,"onUpdate:modelValue":o[11]||(o[11]=l=>t.horarioInicio=l),type:"time"},null,8,["modelValue"]),n(s,{label:"Horario de Finalización",modelValue:t.horarioFin,"onUpdate:modelValue":o[12]||(o[12]=l=>t.horarioFin=l),type:"time"},null,8,["modelValue"]),n(s,{label:"Número de Asistentes",modelValue:t.asistentes,"onUpdate:modelValue":o[13]||(o[13]=l=>t.asistentes=l)},null,8,["modelValue"]),n(s,{label:"Vigencia de Cotización",modelValue:t.vigencia,"onUpdate:modelValue":o[14]||(o[14]=l=>t.vigencia=l)},null,8,["modelValue"]),e("div",null,[o[28]||(o[28]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Unidad de Ejecución",-1)),p(e("select",{"onUpdate:modelValue":o[15]||(o[15]=l=>t.unidadEjecucion=l),class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},o[27]||(o[27]=[e("option",null,"Nivel Nacional",-1),e("option",null,"Nivel Regional",-1),e("option",null,"Local",-1)]),512),[[E,t.unidadEjecucion]])]),n(s,{label:"Tipo de Suelo",modelValue:t.tipoSuelo,"onUpdate:modelValue":o[16]||(o[16]=l=>t.tipoSuelo=l)},null,8,["modelValue"])])]),o[35]||(o[35]=e("div",{class:"pt-6 text-gray-700 text-sm space-y-2"},[e("p",{class:"font-semibold"},"Nota:"),e("p",null,"Esta cotización no implica la confirmación del servicio solicitado, ya que está sujeta a disponibilidad."),e("ol",{class:"list-decimal pl-6 space-y-1"},[e("li",null,"El cliente debe enviar comentarios y observaciones en el tiempo de vigencia de la cotización."),e("li",null,"Be One SAS analizará la disponibilidad del lugar y servicios ofrecidos."),e("li",null,"Se enviará una respuesta de confirmación, cancelación o fechas disponibles.")])],-1)),e("div",ne,[e("div",null,[o[30]||(o[30]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Buscar Producto",-1)),p(e("input",{type:"text","onUpdate:modelValue":o[17]||(o[17]=l=>v.value=l),onFocus:o[18]||(o[18]=l=>x.value=!0),onBlur:T,onInput:k,placeholder:"Buscar producto por nombre...",class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},null,544),[[y,v.value]]),x.value&&c.value.length?(u(),d("ul",se,[(u(!0),d(F,null,z(c.value,l=>(u(),d("li",{key:l.id,onMousedown:S(U=>I(l),["prevent"]),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},[Q(r(l.dispositivo)+" / ",1),e("span",ie,r(l.descripcion),1)],40,re))),128))])):h("",!0)]),e("div",de,[o[31]||(o[31]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Filtrar por categoría",-1)),p(e("input",{type:"text","onUpdate:modelValue":o[19]||(o[19]=l=>b.value=l),onInput:N,onFocus:o[20]||(o[20]=l=>f.value=!0),placeholder:"Buscar categoría...",class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},null,544),[[y,b.value]]),f.value&&g.value.length?(u(),d("ul",ue,[(u(!0),d(F,null,z(g.value,l=>(u(),d("li",{key:l,onMousedown:S(U=>A(l),["prevent"]),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},r(l),41,ce))),128))])):h("",!0)])]),e("div",pe,[e("div",me,[o[32]||(o[32]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Q Jornada",-1)),p(e("input",{"onUpdate:modelValue":o[21]||(o[21]=l=>t.cantidadJornada=l),type:"number",min:"0",class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},null,512),[[y,t.cantidadJornada]])]),e("div",be,[o[33]||(o[33]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Cantidad",-1)),p(e("input",{"onUpdate:modelValue":o[22]||(o[22]=l=>t.cantidadProducto=l),type:"number",min:"0",class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800"},null,512),[[y,t.cantidadProducto]])]),e("div",ge,[e("p",ve,"SubTotal: "+r(C.value),1),e("p",xe,"Total: "+r(C.value),1)]),e("div",null,[e("button",{onClick:$,class:"bg-[#dbeafe] w-full min-w-[220px] hover:bg-blue-200 text-blue-600 font-semibold py-2 px-6 rounded-lg shadow flex items-center justify-center gap-2 mt-3"}," Agregar nuevo ")]),o[34]||(o[34]=e("div",null,[e("button",{class:"bg-blue-600 w-full min-w-[220px] hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg shadow flex items-center justify-center gap-2 mt-3"}," Agregar ")],-1))])]),e("div",fe,[o[37]||(o[37]=e("h2",{class:"text-2xl font-semibold text-gray-800"},"Lista agregada",-1)),e("div",ye,[e("table",we,[o[36]||(o[36]=e("thead",null,[e("tr",{class:"text-left text-sm text-gray-600"},[e("th",{class:"px-4 py-2"},"Tarea"),e("th",{class:"px-4 py-2"},"Responsable"),e("th",{class:"px-4 py-2"},"Vencimiento"),e("th",{class:"px-4 py-2"},"Estado"),e("th",{class:"px-4 py-2"},"Urgencia")])],-1)),e("tbody",null,[(u(),d(F,null,z(J,l=>e("tr",{key:l.id,class:"bg-gray-50 rounded-lg shadow-sm"},[e("td",Ce,r(l.tarea),1),e("td",Ve,r(l.responsable),1),e("td",ke,r(l.vencimiento),1),e("td",Ue,[e("span",{class:B(["inline-block px-3 py-1 rounded-full text-xs font-semibold",{"bg-yellow-100 text-yellow-800":l.estado==="Pendiente","bg-blue-100 text-blue-800":l.estado==="En curso","bg-green-100 text-green-800":l.estado==="Completado"}])},r(l.estado),3)]),e("td",Ee,[e("span",{class:B(["inline-block px-3 py-1 rounded-full text-xs font-semibold",{"bg-red-100 text-red-800":l.urgencia==="Alta","bg-orange-100 text-orange-800":l.urgencia==="Media","bg-green-100 text-green-800":l.urgencia==="Baja"}])},r(l.urgencia),3)])])),64))])])])]),n(Z,{show:V.value,onClose:L},{default:O(()=>[o[40]||(o[40]=e("h2",{class:"text-xl font-bold text-blue-800 mb-4"},"Crear nuevo producto",-1)),e("form",null,[o[39]||(o[39]=e("div",{class:"mb-4"},[e("label",{class:"block text-gray-700 mb-1"},"Nombre del producto"),e("input",{type:"text",class:"w-full border border-gray-300 rounded px-3 py-2"})],-1)),e("div",{class:"flex justify-end mt-4"},[e("button",{type:"button",class:"mr-2 px-4 py-2 bg-gray-200 rounded",onClick:L},"Cancelar"),o[38]||(o[38]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Guardar",-1))])])]),_:1,__:[40]},8,["show"])]))}};export{Le as default};
