import{e as p,h as k,f as _,c as n,a as e,g as b,n as D,t as u,b as c,i as N,v as B,F as g,d as w,q as E,s as S,o as d}from"./index-leR-G3hy.js";import{_ as m}from"./InputLabel-B9iJTAze.js";const j={class:"bg-white shadow-md rounded-xl p-6 mx-auto space-y-8"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},L=["value"],M={class:"pt-4"},A=["disabled"],F={key:0,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},O={key:0,class:"overflow-x-auto mt-6 bg-white shadow-md rounded-xl p-6"},R={class:"min-w-full bg-white shadow rounded-lg"},$={class:"py-2 px-4"},q={class:"py-2 px-4"},G={class:"py-2 px-4"},J={__name:"List",setup(H){const v=p([]),V=["Administrador","Comité Ejecutivo","Back Office","Depto Administración","Depto Comercial","Depto Operación","Coordinador General","Coordinador","Dinamizador"],l=k({nombre:"",correo:"",contrasena:"",rol:""}),r=p(!1),t=p(""),i=p("success"),C=()=>{l.nombre="",l.correo="",l.contrasena="",l.rol=""},U=async()=>{t.value="",r.value=!0;try{await S({email:l.correo,password:l.contrasena,fullName:l.nombre,role:l.rol}),t.value="Usuario creado exitosamente.",i.value="success",C()}catch(s){t.value=(s==null?void 0:s.message)||"Error al crear el usuario.",i.value="error"}finally{r.value=!1}},h=async()=>{t.value="",r.value=!0;try{const s=await E();v.value=s.data,console.log(s),t.value="Usuarios cargados exitosamente.",i.value="success"}catch(s){t.value=(s==null?void 0:s.message)||"Error al obtener los usuarios.",i.value="error"}finally{r.value=!1}};return _(()=>{h()}),(s,o)=>(d(),n(g,null,[e("div",j,[o[9]||(o[9]=e("div",null,[e("h2",{class:"text-2xl font-bold text-blue-700"},"Crear Usuario")],-1)),t.value?(d(),n("div",{key:0,class:D(`p-3 rounded-lg text-sm ${i.value==="error"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`)},u(t.value),3)):b("",!0),e("div",z,[c(m,{label:"Nombre Completo",modelValue:l.nombre,"onUpdate:modelValue":o[0]||(o[0]=a=>l.nombre=a)},null,8,["modelValue"]),c(m,{label:"Correo Electrónico",modelValue:l.correo,"onUpdate:modelValue":o[1]||(o[1]=a=>l.correo=a),type:"email"},null,8,["modelValue"]),c(m,{label:"Contraseña",modelValue:l.contrasena,"onUpdate:modelValue":o[2]||(o[2]=a=>l.contrasena=a),type:"password"},null,8,["modelValue"]),c(m,{label:"Sede",modelValue:l.contrasena,"onUpdate:modelValue":o[3]||(o[3]=a=>l.contrasena=a),type:"text"},null,8,["modelValue"]),c(m,{label:"Departamento",modelValue:l.contrasena,"onUpdate:modelValue":o[4]||(o[4]=a=>l.contrasena=a),type:"text"},null,8,["modelValue"]),e("div",null,[o[7]||(o[7]=e("label",{class:"block text-gray-800 font-medium mb-1"},"Rol",-1)),N(e("select",{"onUpdate:modelValue":o[5]||(o[5]=a=>l.rol=a),class:"w-full border border-gray-300 rounded px-3 py-2 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500"},[o[6]||(o[6]=e("option",{disabled:"",value:""},"Selecciona un rol",-1)),(d(),n(g,null,w(V,a=>e("option",{key:a,value:a},u(a),9,L)),64))],512),[[B,l.rol]])])]),e("div",M,[e("button",{class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg shadow flex items-center justify-center gap-2",onClick:U,disabled:r.value},[r.value?(d(),n("svg",F,o[8]||(o[8]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)]))):b("",!0),e("span",null,u(r.value?"Creando...":"Crear Usuario"),1)],8,A)])]),v.value.length>0?(d(),n("div",O,[e("table",R,[o[10]||(o[10]=e("thead",null,[e("tr",{class:"bg-blue-100 text-left text-gray-700"},[e("th",{class:"py-3 px-4"},"Nombre"),e("th",{class:"py-3 px-4"},"Correo"),e("th",{class:"py-3 px-4"},"Rol")])],-1)),e("tbody",null,[(d(!0),n(g,null,w(v.value,a=>{var y,x,f;return d(),n("tr",{key:a.id,class:"border-b hover:bg-gray-50"},[e("td",$,u(a.fullName),1),e("td",q,u(a.email),1),e("td",G,u(((f=(x=(y=a.roles)==null?void 0:y[0])==null?void 0:x.role)==null?void 0:f.name)||"Sin rol"),1)])}),128))])])])):b("",!0)],64))}};export{J as default};
